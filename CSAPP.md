# 第二章  信息的表示和处理

## 序言

本章主要研究三种重要的数字表示。无符号（unsigned）编码，表示大于或等于0的数。补码（two's complement）编码表示有符号整数的常见方式。浮点数（floating-point）编码表示实数的科学计数法的以2为基数的版本。

理解不同的数字编码方法是必要的，因为有时候会因为溢出，舍入等问题造成结果错误。

例子：

```tex
溢出
200*300*400*500 = -884 901 888//正数乘法本不可能算出负数，但是由于溢出会造成这样的结果。

舍入（由于表示的精度有限，浮点运算是不可结合的）
(3.14+1e20)-1e20 = 0.0
3.14+(1e20-1e20) = 3.14 //因为3.14被舍入到了1e20里面了

```

**明确一些概念：**

一个**“位”**存储一位的字节码

一个**字节**由8**位**组成

**字**通常为16位，32位，64位

## 信息存储

### 十六进制表示法

![image-20210706192016957](image/image-20210706192016957.png)

一般可以用4位二进制来表示一个十六进制的数。

![image-20210706192120726](image/image-20210706192120726.png)

十进制和十六进制的转换。

考虑十进制$ x = 314156 $的转换,反复用16除以$x$，得到商$q$和一个余数$r$，$ x=q \cdot 16 + r$，然后我们用十六进制的$r$作为最低位数字。
$314156 = 19634 \cdot 16 + 12$
$ 19634 = 1227 \cdot 16 + 2 $
$ 1227 = 76 \cdot 16 + 11 $
$ 76 = 4 \cdot 16 + 12 $
$ 4 = 0 \cdot 16 + 4 $
可以获得十六进制表示为 0x4CB2C

反过来转换为十进制则是

$12 \cdot 16^0 + 2 \cdot 16^1 + 11 \cdot 16^2 + 12 \cdot 16^3 + 4*16^4 = 314156$

### 字数据大小

字长（word size）决定了虚拟地址空间的最大大小。对一个字长为$w$位的机器而言，虚拟地址空间的范围为$0 \sim 2^{w}-1$。

C语言数据类型的基本大小。

<img src="image/image-20210707190324423.png" alt="image-20210707190324423" style="zoom:50%;" />

### 寻址和字节顺序

在几乎所有的机器上，多字节对象都被存储为连续的字节序列，对象的地址为所使用的最小的地址。

例如：一个int类型的变量x，它的地址为0x100。假设在一台32位的机器上，x的4个字节被存储在内存的0x100，0x101，0x102，0x103的位置上。



考虑一个$w$位的整数，其位表示为$[x_{w-1},x_{w-2},...,x_{1},x_{0}]$，其中$x_{w-1}$是最高有效位，而$x_0$是最低有效位。

假设$w$是8的倍数，这些**位**就可以被分组为字节。

其中最高有效字节包含位$[x_{w-1}, x_{w-2},...,x_{w-8}]$。

其中最低有效字节包含位$[x_{7}, x_{6},...,x_{0}]$。



从最低有效字节到最高有效字节的顺序存储对象：**小端法**

从最高有效字节到最低有效字节的顺序存储对象：**大端法**

例子：假设变量x的类型为int，位于地址0x100，它的十六进制值为0x01234567，地址范围为0x100~0x103。（每两位十六进制为一个字节，故最高有效字节为0x01，最低有效字节为0x67）

![image-20210707193725056](image/image-20210707193725056.png)

